<%= partial 'layouts/location' %>
<section id="contact" class="contact section">
  <div class="container" data-aos="fade-up" data-aos-delay="100">
    <!-- Contact Form -->
    <div class="row justify-content-center mb-5" data-aos="fade-up" data-aos-delay="200">
      <div class="col-lg-10">
        <div class="contact-form-wrapper">
          <h2 class="text-center mb-4">Send a Message</h2>

          <form action="" method="post" class="php-email-form">
            <div class="row g-3">
              <div class="col-md-6">
                <div class="form-group">
                  <input type="text" class="form-control" name="name" placeholder="Your Name" required="">
                </div>
              </div>

              <div class="col-md-6">
                <div class="form-group">
                  <input type="email" class="form-control" name="email" placeholder="Email Address" required="">
                </div>
              </div>

              <div class="col-12">
                <div class="form-group">
                  <input type="text" class="form-control" name="subject" placeholder="Subject" required="">
                </div>
              </div>

              <div class="col-12">
                <div class="form-group">
                  <textarea class="form-control" name="message" placeholder="Your Message" rows="6" required=""></textarea>
                </div>
              </div>

              <div class="col-12">
                <div class="loading">Loading</div>
<!--                <div class="error-message"></div>-->
                <div class="sent-message">Your message has been sent. Thank you!</div>
              </div>

              <div class="col-12 text-center">
                <button type="submit" class="btn-submit">SEND MESSAGE</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>

  </div>
  <script>
      document.addEventListener("DOMContentLoaded", () => {
          const form = document.querySelector(".php-email-form");
          if (!form) return;

          form.addEventListener("submit", function (e) {
              e.preventDefault();

              const data = new FormData(form);
              let msgLines = [];

              data.forEach((value, key) => {
                  if (value.trim() !== "") {
                      let label = key.replace(/_/g, " ");
                      label = label.charAt(0).toUpperCase() + label.slice(1);
                      msgLines.push(`${label}: ${value}`);
                  }
              });

              const message = encodeURIComponent(msgLines.join("\n"));
              const phone = "<%= data.info.wa_phone %>";

              const url = `https://api.whatsapp.com/send?phone=${phone}&text=${message}`;
              window.open(url, "_blank");
          });
      });
  </script>
</section><!-- /Contact Section -->